import time
import string
import graphics

print('\n\n  Melhor jogo da velha do universo!')
time.sleep(1.5)
print('\n  Este jogo trabalha com coordenadas')
time.sleep(1.5)
print('  É necessário dizer em qual coordenada você deseja jogar')
time.sleep(1.5)
print('  Por exemplo: A1, ou B2, entendeu?')
time.sleep(1.5)
print('  Então, vamos lá!')
time.sleep(1.5)
print(graphics.board_start())

def jogo():

	#
  	# Nome dos jogadores:
 	#
	global jogador_1, jogador_2
	
	while True:
		jogador_1 = input('\n  Nome do primeiro jogador: ')
		time.sleep(1)		
		if jogador_1 == '' or jogador_1 == ' ':
			print('  Escolha um nome válido')
			time.sleep(1)
			continue
		else:
			print('\n  Olá, ', jogador_1)
			time.sleep(1)
			break

	while True:
		jogador_2 = input('\n  Nome do segundo jogador: ')
		time.sleep(1)
		if jogador_2 == jogador_1:
			print('  Escolha um nome diferente do primeiro jogador')
			time.sleep(1)
			continue
		elif jogador_2 == '' or jogador_2 == ' ':
			print('  Escolha um nome válido')
			time.sleep(1)
			continue
		else:
			print('\n  Olá, ', jogador_2)
			time.sleep(1)
			break

	#
	# Checando o vencedor:
	#
	def checar_vencedor(lista):
		if 'a1' in lista and 'a2' in lista and 'a3' in lista:
			return True
		elif 'b1' in lista and 'b2' in lista and 'b3' in lista:
			return True
		elif 'c1' in lista and 'c2' in lista and 'c3' in lista:
			return True
		elif 'a1' in lista and 'b1' in lista and 'c1' in lista:
			return True
		elif 'a2' in lista and 'b2' in lista and 'c2' in lista:
			return True
		elif 'a3' in lista and 'b3' in lista and 'c3' in lista:
			return True
		elif 'a1' in lista and 'b2' in lista and 'c3' in lista:
			return True
		elif 'c1' in lista and 'b2' in lista and 'a3' in lista:
			return True
		else:
			return False

	#
	# Lógica do jogo:
	#
	lista_de_jogadas = ['a1', 'a2', 'a3', 'b1', 'b2','b3', 'c1', 'c2', 'c3']
	jogada_1 = 0
	lista_1 = []
	vitoria_1 = False
	jogada_2 = 0
	lista_2 = []
	vitoria_2 = False
	repetir = 0

	while True:
		if vitoria_1 == True:
			print('  %s venceu o jogo!' %(jogador_1))
			repetir = input('  Deseja jogar novamente?\n  ')
			if repetir == 'sim' or repetir == 'Sim':
				graphics.board_start()
				jogo()
				break
			else:
				print('  Não? Ok, obrigado por jogar!')
				break 

		elif vitoria_2 == True:
			print('  %s venceu o jogo!' %(jogador_2))
			repetir = input('  Deseja jogar novamente?\n  ')
			if repetir == 'sim' or repetir == 'Sim':
				graphics.board_start()
				jogo()
				break
			else:
				print('  Não? Ok, obrigado por jogar!')
				break
		
		else:
			while vitoria_1 == False and vitoria_2 == False:
				jogada_1 = input('\n  %s, escolha uma coordenada: ' %(jogador_1)).lower()			  				
				if jogada_1 not in lista_de_jogadas:
					print('  Jogada inválida')
					continue
				else:
					lista_de_jogadas.remove(jogada_1)				
					lista_1.append(jogada_1)
					graphics.circulo(jogada_1)									
					print(graphics.tabuleiro)
					vitoria_1 = checar_vencedor(lista_1)
					time.sleep(1)
					if vitoria_1 == True:
						break
					elif len(lista_1) == 5:
						print('  Empate!')
						repetir = input('  Deseja jogar novamente?\n  ')
						if repetir == 'sim' or repetir == 'Sim':
							graphics.board_start()
							jogo()
							break
						else:
							print('  Não? Ok, obrigado por jogar!')
							break
					else:
						while True:
							jogada_2 = input('\n  %s, escolha uma coordenada: ' %(jogador_2)).lower()  			  							
							if jogada_2 not in lista_de_jogadas:
								print('  Jogada inválida')
								continue
							else:
								lista_de_jogadas.remove(jogada_2)
								lista_2.append(jogada_2)
								graphics.xis(jogada_2)	
								print(graphics.tabuleiro)
								vitoria_2 = checar_vencedor(lista_2)
								time.sleep(1)
								if vitoria_2 == True:
									break
								else:
									break
					continue			
			continue

jogo()
